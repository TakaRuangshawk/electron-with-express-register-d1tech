<!DOCTYPE html>
<%- include('include/head'); %>
	<html lang="th">
		<style>
			@font-face {
			  font-family: 'DBHelvethaicaX';
			  src: url('/fonts/DBHelvethaicaX.ttf') format('truetype');
			  font-weight: 400; /* normal */
			  font-style: normal;
			}

			@font-face {
			  font-family: 'DBHelvethaicaX';
			  src: url('/fonts/DB Helvethaica X Med v3.2.ttf') format('truetype');
			  font-weight: 600; /* semi-bold */
			  font-style: normal;
			}

			@font-face {
			  font-family: 'DBHelvethaicaX';
			  src: url('/fonts/DB HelvethaicaMon X Bd v3.2.ttf') format('truetype');
			  font-weight: 700; /* bold */
			  font-style: normal;
			}

			.page {
			  display: none;
			  opacity: 0;
			  transition: opacity 0.4s ease;
			}
			.page.active { 
				display: block; 
				opacity: 1;
			}
			.page.fade-in {
			  opacity: 1;
			}
			body {
			  margin: 0;
			  padding: 0;
			  font-family: 'DBHelvethaicaX';
			  /* font-family: sans-serif; */
			}
			body.bg-register.th {
			  background: url('/image/zerostate_th.jpg') no-repeat center center fixed;
			  background-size: cover;
			}

			body.bg-register.en {
			  background: url('/image/zerostate_en.jpg') no-repeat center center fixed;
			  background-size: cover;
			}

			body.bg-default {
			  background: url('/image/bg.jpg') no-repeat center center fixed;
			  background-size: cover;
			}
			.register-container {
			    position: absolute;
			    top: 85%;
			    left: 50%;
			    transform: translate(-50%, -50%);
			    cursor: pointer;
			}
		
			.register-button {
  			  position: relative;
  			  display: inline-block;
  			}
		
  			.register-button img {
  			  width: 420px;
  			  height: 156px;
  			  display: block;
			  object-fit: fill;
  			}
		
			  .register-button span {
  			  position: absolute;
  			  top: 50%;
  			  left: 50%;
  			  transform: translate(-50%, -50%);
  			  color: #000000;
  			  font-size: 52px; 
  			  font-weight: bold;
  			  white-space: nowrap;
  			  pointer-events: none;
  			}
			  .lang-switch {
			  position: absolute;
			  top: 20px;
			  left: 20px;
			  z-index: 999;
			}
			
			.lang-switch img {
			  width: 48px;
			  height: 48px;
			  object-fit: cover;
			  border-radius: 50%;
			  margin-right: 10px;
			  border: 2px solid #ffffff;
			  box-shadow: 0 0 4px rgba(0, 0, 0, 0.3);
			  cursor: pointer;
			  transition: transform 0.2s ease;
			}
			
			.lang-switch img:hover {
			  transform: scale(1.1);
			}
			p{
				margin: 0;
    			text-align: center;
			}
			h1 {
			  text-align: center;
			  font-size: 72px;
			  color: #123b77;
			  margin-top: 60px;
			}

			.consent-box {
			  background-color: #003366;
			  color: white;
			  padding: 40px 60px;
			  border-radius: 20px;
			  max-width: 1660px;
			  margin: 40px auto 0 auto;
			  font-size: 42px;
			  line-height: 1.5;
			}

			.consent-box ul {
			  list-style: none;
			  padding-left: 0;
			  margin-top: 20px;
			  margin-bottom: 20px;
			}

			.consent-box li::before {
			  content: '‚óè ';
			  color: white;
			  margin-right: 10px;
			}

			.button-row {
			  display: flex;
			  justify-content: space-between;
			  margin: 40px 80px 0px 80px;
			}

			.register-button {
			  position: relative;
			  display: inline-block;
			  cursor: pointer;
			}
			#page-waitcard {
			  text-align: center;
			}
			#card-image {
			  margin-top: 40px;
			}
			/* Container for loading page */
			#page-loading {
			  display: none; /* ‚úÖ ‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô */
			  justify-content: center;
			  align-items: center;
			  height: 100vh;
			  position: relative;
			}

			#page-loading.active {
			  display: flex; /* ‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠ active ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô */
			}


			/* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏£‡∏ß‡∏° dot + ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
			.loading-wrapper {
			  display: flex;
			  flex-direction: column;
			  align-items: center;
			  position: absolute;
			  top: 500px; /* ‚úÖ ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ */
			}

			/* ‡∏ã‡πà‡∏≠‡∏ô‡∏à‡∏∏‡∏î‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô */
			.dots {
			  display: none;
			}

			/* ‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏∏‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠ page-loading ‡∏°‡∏µ class active */
			#page-loading.active .dots {
			  display: grid;
			  grid-template-columns: repeat(2, 40px);
			  grid-template-rows: repeat(2, 40px);
			  gap: 20px;
			  justify-content: center;
			  align-items: center;
			}

			/* ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏à‡∏∏‡∏î‡∏Å‡∏•‡∏° */
			.dot {
			  width: 30px;
			  height: 30px;
			  border-radius: 50%;
			  animation: pulse 1.2s infinite ease-in-out;
			}

			/* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡∏µ‡πÅ‡∏•‡∏∞ delay ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏à‡∏∏‡∏î */
			.dot:nth-child(1) { background-color: #1fb8ad; animation-delay: 0s; }
			.dot:nth-child(2) { background-color: #fca934; animation-delay: 0.2s; }
			.dot:nth-child(3) { background-color: #34545e; animation-delay: 0.4s; }
			.dot:nth-child(4) { background-color: #e55858; animation-delay: 0.6s; }

			/* Animation */
			@keyframes pulse {
			  0%, 100% { transform: scale(1); opacity: 1; }
			  50%      { transform: scale(1.4); opacity: 0.6; }
			}

			/* ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà */
			#page-loading h1 {
			  display: none;
			}

			/* ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÉ‡∏´‡πâ h1 ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏≠‡∏ô active */
			#page-loading.active h1 {
			  display: block;
			  font-size: 52px;
			  color: #123b77;
			  margin: 0;
			  position: absolute;
			  top: 100px;
			  white-space: nowrap;
			}

			#page-success {
			  text-align: center;
			}

			.success-content {
			  display: flex;
			  flex-direction: row;
			  align-items: center;
			  justify-content: center;
			  gap: 40px;
			  height: 1080px;
			}

			.success-text {
			  display: flex;
			  align-items: center;
			  gap: 20px;
			  text-align: left;
			}

			.success-icon {
			  width: 90px;
			  height: 90px;
			  position: absolute;
			}

			.success-icon.th {
			    left: 465px;
			    top: 433px;
			}

			.success-icon.en {
			  left: 320px;
			  top: 430px;
			}


			.success-text h1 {
			  margin: 0;
			  font-size: 52px;
			}

			.success-text p {
			  font-size: 52px;
			  color: #123b77;
			  margin: 10px 0 0;
			  line-height: 1.0;
			}

			.success-card img {
			  margin-top: 20px;
			}

			#page-cancel {
			  /* display: none; */
			  justify-content: center;
			  align-items: center;
			  top: 400px;
			  position: relative;
			}

			.cancel-wrapper {
			  text-align: center;
			  position: absolute;
			  top: 25%;
			  left: 50%;
			  transform: translateX(-50%);
			}

			.cancel-icon {
			  width: 160px;
			  height: auto;
			  margin-bottom: 20px;
			}

			.cancel-text-red {
			  color: red;
			  font-size: 48px;
			  margin: 0;
			  text-align: center;
			}

			.cancel-text-blue {
			  color: #1b1f75;
			  font-size: 42px;
			  margin-top: 12px;
			  text-align: center;
			}



			#page-confirm h1 {
			  position: relative;
    		  top: 100px;
			  color: #123b77;
			  font-size: 56px;
			  font-weight: bold;
			  margin-top: 60px;
			  margin-bottom: 32px;
			  text-align: center;
			}

			.confirm-flex {
			    display: flex;
			    flex-direction: row;
			    align-items: flex-start;
			    justify-content: center;
			    width: 100%;
			    max-width: 1500px;
			    margin: 0 auto 60px auto;
			    gap: 80px;
			    position: relative;
			    top: 130px;
			}

			.confirm-photo {
			  flex: 0 0 500px;
			  border-radius: 20px;
			  box-shadow: 0 4px 24px rgba(0,0,0,0.05);
			  display: flex;
			  align-items: center;
			  justify-content: center;
			}

			.confirm-photo img {
			  border-radius: 16px;
			  object-fit: cover;
			}

			.confirm-info {
			   display: flex;
			   flex-direction: column;
			   justify-content: center;
			   min-width: 520px;
			   gap: 36px;
			   padding: 48px 0 0 0;
			   white-space: nowrap;
			   position: relative;
			   top: 80px;
			}

			.confirm-info .label {
			  display: inline-block;
			  width: 380px;
			  font-weight: bold;
			}

			.confirm-info div {
			    color: #123b77;
			    font-size: 42px;
			    font-weight: bold;
			    line-height: 1.2;
			    margin-bottom: 10px;
			}

			.confirm-info span {
			  margin-left: 12px;
			  color: #123b77;
			  font-weight: bold;
			}
			
			.result-content {
			  display: flex;
			  justify-content: flex-start;
			  align-items: center;
			  box-sizing: border-box;
			  position: relative;
			  padding-left: 120px;
			}

			.result-status {
			  	width: 720px;
			  	display: flex;
			  	flex-direction: column;
			  	justify-content: center;
			  	position: relative;
    			top: 350px;
			}
			.result-icon.th{
				position: relative;
    			top: 110px;
    			left: 100px;
			}
			.result-icon.en{
				position: relative;
    			top: 105px;
    			left: 55px;
			}
			.result-icon img {
			  width: 100px;
			  margin-bottom: 20px;
			}

			.result-main-msg {
			  	font-size: 60px;
			  	font-weight: bold;
			  	color: #19b43b;
			  	margin-bottom: 16px;
			  	display: flex;
    			justify-content: center;
    			/* padding-left: 35px; */
			}

			.result-sub-msg {
				display: flex;
				text-align: center;
    			justify-content: center;
			  	font-size: 60px;
			  	font-weight: 600;
			  	color: #273564;
			}

			.result-ticket {
			  position: absolute;
			  right: 100px;
			  top: 230px;
			  width: 700px;
			  background: radial-gradient(circle at center, rgba(255, 227, 190, 0.1) 0%, rgba(255, 227, 190, 0.85) 90%);
			  border-radius: 32px;
			  padding: 40px 54px;
			  display: flex;
			  flex-direction: column;
			  align-items: flex-end;
			  box-shadow: 0 4px 28px rgba(0, 0, 0, 0.08);
			}

			.ticket-header {
			  width: 100%;
			  display: flex;
			  justify-content: center;
			  margin-bottom: 20px;
			}

			.ticket-logo {
			  width: 300px;
			}

			.ticket-info {
			    width: 100%;
			    color: #21396b;
			    font-size: 42px;
			    font-weight: 600;
			    line-height: 1.4;
			    white-space: nowrap;
			}

			.ticket-info .info-label {
			    width: 338px;
			    display: inline-block;
			    font-weight: 500;
			    white-space: nowrap;
			}

			.ticket-info > div {
			  margin-bottom: 16px;
			}

			.ticket-register-count {
			  text-align: center;
			  margin-top: 20px;
			  font-size: 88px;
			  font-weight: 800;
			  color: #20307c;
			}
			.cancel-wrapper-missing-name {
			    text-align: center;
			    position: absolute;
			    top: 34%;
			    left: 50%;
			    transform: translateX(-50%);
			}

		  </style>
	<body class="bg-register <%= lang %>">
		<!-- ‡∏´‡∏ô‡πâ‡∏≤ 1: ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô/register button -->
		 <!-- <button style="position: absolute;" id="print-btn">üñ®Ô∏è Send to Printer</button> -->
		<div>
			<span style="display: none;" id="confirm-register-count"></span>
		  </div>
		<div id="page-register" class="page active">
			<div class="lang-switch">
				<a href="/?lang=th">
				  <img src="/image/th.webp" alt="TH">
				</a>
				<a href="/?lang=en">
				  <img src="/image/us.png" alt="EN">
				</a>
			  </div>

			<div class="register-container">
				<div class="register-button" onclick="goToPage('page-consent')">
				  <img src="/image/button_register.png" alt="‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô">
				  <% if (lang === 'th') { %>
					<span>‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</span>
				  <% } else { %>
					<span>Register</span>
				  <% } %>
				</div>
			</div>
		</div>
		
		<div id="page-consent" class="page" style="align-content: center;height: 1061px;">
			<h1 style="top: 15px; position: relative;">
		    	<% if (lang === 'th') { %>
		      		‡∏Ç‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô
		    	<% } else { %>
		      		Consent for Identity Verification
		    	<% } %>
		  	</h1>
	  
		  	<div class="consent-box">
		    	<% if (lang === 'th') { %>
		    	  <p>‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô‡πÅ‡∏•‡∏∞‡∏†‡∏≤‡∏û‡∏ñ‡πà‡∏≤‡∏¢‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏î ‡πÜ</p>
		    	  <ul>
		    	    <li>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏á‡∏≤‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</li>
		    	    <li style="position: relative;bottom: 10px;">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö ‡∏™‡πà‡∏á‡∏ï‡πà‡∏≠ ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå‡∏≠‡∏∑‡πà‡∏ô</li>
		    	  </ul>
		    	  <p>‡πÇ‡∏õ‡∏£‡∏î‡∏Å‡∏î ‚Äú‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‚Äù ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠<br>‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏° ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏î ‚Äú‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‚Äù</p>
		    	<% } else { %>
		      		<p>
		      		  To ensure the security and accuracy of our service, the system will read information from your national ID card and facial image without storing or recording any data.
		      		</p>
		      		<ul>
		        	<li>The information will be used solely for identity verification during event registration</li>
		        	<li style="position: relative;bottom: 10px;">No data will be stored, shared, or used for any other purpose</li>
		      		</ul>
		      		<p>
		      		  Please press ‚ÄúConsent‚Äù to proceed.<br>
		      		  If you do not consent, please press ‚ÄúCancel.‚Äù
		      		</p>
		    	<% } %>
		  </div>
	  
		  <div class="button-row">
		    	<div class="register-button" onclick="goToPageCancelThenRegister()">
		      		<img src="/image/button_cancel.png" alt="<%= lang === 'th' ? '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å' : 'Cancel' %>">
		      		<span><%= lang === 'th' ? '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å' : 'Cancel' %></span>
		    	</div>
		    	<div class="register-button" onclick="goToPage('page-waitcard')">
		    	  	<img src="/image/button_register.png" alt="<%= lang === 'th' ? '‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°' : 'Consent' %>">
		    	  	<span><%= lang === 'th' ? '‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°' : 'Confirm' %></span>
		    	</div>
		  </div>
		</div>
		<div id="page-waitcard" class="page">
			<h1 style="top:150px;position: relative;">
			  <%- lang === 'th'
				? '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏™‡∏µ‡∏¢‡∏ö‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô<br>‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏≠‡∏á‡∏≠‡πà‡∏≤‡∏ô‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô'
				: 'Please insert your ID Card<br>into Cardreader' %>
			</h1>
			<img id="card-image" style="position: relative;top: 100px;" src="/image/pic_takecard_in.png" width="500">
			<div class="button-row">
				<div class="register-button" onclick="goToPageCancelThenRegister()" style="bottom: -28px;">
				  <img src="/image/button_cancel.png" alt="<%= lang === 'th' ? '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å' : 'Cancel' %>">
				  <span><%= lang === 'th' ? '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å' : 'Cancel' %></span>
				</div>
				<div class="register-button" onclick="goToPage('page-waitcard')" style="display: none;">
				  <img src="/image/button_register.png" alt="<%= lang === 'th' ? '‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°' : 'Consent' %>">
				  <span><%= lang === 'th' ? '‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°' : 'Consent' %></span>
				</div>
			  </div>
		</div>

		<div id="page-cancel" class="page">
			<div class="cancel-wrapper">
			  <img src="/image/icon_error.png" class="cancel-icon" alt="Cancel Icon">
			  <h1 class="cancel-text-red"><%= lang === 'th' ? '‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å' : 'Cancel Transaction' %></h1>
			  <h2 class="cancel-text-blue"><%= lang === 'th' ? '‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£' : 'Thank you for using service' %></h2>
			</div>
		</div>

		<div id="page-cancel-missing-name" class="page">
			<div class="cancel-wrapper-missing-name">
			  <img src="/image/icon_error.png" class="cancel-icon" alt="Cancel Icon">
			  <h1 class="cancel-text-red"><%- lang === 'th' ? '‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å' : 'Cancel Transaction' %></h1>
			  <h2 class="cancel-text-blue"><%- lang === 'th' ? '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ô‡∏≥‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô<br>‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏≠‡πà‡∏≤‡∏ô‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô' : 'Please take your ID Card off <br>from the Cardreader' %></h2>
			</div>
		</div>
		  
		<div id="page-loading" class="page">
			<div class="loading-wrapper">
			  <div class="dots">
				<span class="dot teal"></span>
				<span class="dot orange"></span>
				<span class="dot navy"></span>
				<span class="dot red"></span>
			  </div>
			  <h1 style="position: relative;"><%= lang === 'th' ? '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà' : 'Please wait' %></h1>
			</div>
		  </div>
		  
		<div id="page-success" class="page">
		  <div class="success-content">
		    <div class="success-text">
		      <img src="/image/icon_success.png" class="success-icon <%= lang %>" alt="success">
		      <div>
		        <h1 style="color: #00aa00;">
		          <%= lang === 'th' ? '‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à' : 'Read card successful' %>
		        </h1>
		        <p>
		          <%- lang === 'th' ? '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ô‡∏≥‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô<br>‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏≠‡πà‡∏≤‡∏ô‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô' : 'Please take your ID Card off<br>from the Cardreader' %>
		        </p>
		      </div>
		    </div>
		
		    <div class="success-card">
		      <img src="/image/pic_takecard_off.png" width="500">
		    </div>
		  </div>
		</div>

		<div id="page-camera" class="page">
			<div id="countdown" style="position: absolute; top: 45%; left: 50%; transform: translate(-50%, -50%);
  			font-size: 200px; color: white; display: none; z-index: 10; font-weight: bold;">3</div>

			<h1 style="position: relative;top: 150px;font-size:62px">
			  <%= lang === 'th'
				? '‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏°‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏†‡∏≤‡∏û'
				: 'Take a photo to verify your identity. Please look at the camera' %>
			</h1>
		  
			<div class="camera-center">
			  <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á/‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠ -->
			  <div id="camera-live" style="justify-content: center;position: relative; top: 150px;">
				<video id="video" autoplay playsinline></video>
			  </div>
		  
			  <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏†‡∏≤‡∏û‡∏ñ‡πà‡∏≤‡∏¢ (‡∏´‡∏•‡∏±‡∏á‡∏Å‡∏î‡∏ñ‡πà‡∏≤‡∏¢) -->
			  <div id="camera-preview" style="display:none;justify-content: center;position: relative; top: 150px;">
				<img id="photo-preview" alt="Captured photo"/>
			  </div>
			</div>
		  
			<div class="button-row" style=" position: relative;top: 150px">
			  <div class="register-button cancel-btn" onclick="goToPageCancelThenRegister()">
				<img src="/image/button_cancel.png" alt="">
				<span><%= lang === 'th' ? '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å' : 'Cancel' %></span>
			  </div>
			  <div id="btn-capture" class="register-button" onclick="capturePhoto()">
				<img src="/image/button_register.png" alt="">
				<span><%= lang === 'th' ? '‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û' : 'Take Photo' %></span>
			  </div>
			  <div id="btn-retake" class="register-button" style="display:none;position: relative;bottom: 185px; left: 670px;" onclick="retakePhoto()">
				<img src="/image/button_register.png" alt="">
				<span><%= lang === 'th' ? '‡∏ñ‡πà‡∏≤‡∏¢‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á' : 'Retake' %></span>
			  </div>
			  <div id="btn-next" class="register-button" style="display:none;" onclick="goToPage('page-confirm')">
				<img src="/image/button_register.png" alt="">
				<span><%= lang === 'th' ? '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô' : 'Confirm' %></span>
			  </div>
			</div>
		  </div>

		  <div id="page-confirm" class="page">
			<h1>
			  <%= lang === 'th'
				? '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏ó‡πà‡∏≤‡∏ô'
				: 'Please confirm your information' %>
			</h1>
		  
			<div class="confirm-flex">
			  <div class="confirm-photo">
				<img id="final-photo" src="" alt="Captured photo"/>
			  </div>
			  <div class="confirm-info">
				<div>
					<span class="label"><%= lang === 'th' ? '‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô:' : 'ID Card No:' %></span>
				  	<span id="confirm-nid"></span>
				</div>
				<div>
					<span class="label"> <%= lang === 'th' ? '‡∏ä‡∏∑‡πà‡∏≠ - ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:' : 'Full Name:' %> </span>
				  <span id="confirm-fullname"></span>
				</div>
				<div>
					<span class="label"> <%= lang === 'th' ? '‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤:' : 'Customer Group:' %></span>
				  <span id="confirm-bank"></span>
				</div>
			  </div>
			</div>
		  
			<div class="button-row" style="position: relative;top: 150px;">
			  <div class="register-button cancel-btn" onclick="goToPageCancelThenRegister()">
				<img src="/image/button_cancel.png" alt="">
				<span><%= lang === 'th' ? '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å' : 'Cancel' %></span>
			  </div>
			  <div class="register-button" onclick="goToPage('page-result')">
				<img src="/image/button_register.png" alt="">
				<span><%= lang === 'th' ? '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô' : 'Confirm' %></span>
			  </div>
			</div>
		  </div>
		  <div id="page-result" class="page">
			<div class="result-content">
			  <!-- ‡∏ù‡∏±‡πà‡∏á‡∏ã‡πâ‡∏≤‡∏¢: ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ -->
			  <div class="result-status">
				<div class="result-icon <%= lang %>">
					<img src="/image/icon_success.png" alt="Success" />
				  </div>
				<div class="result-main-msg" style="color: #19b43b;">
					
				  <%= lang === 'th' ? '‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à' : 'Register successful' %>
				</div>
				<div class="result-sub-msg">
				  <%= lang === 'th' ? '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏±‡∏ö‡πÉ‡∏ö‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô' : 'Please take your registration form' %>
				</div>
			  </div>
		  
			  <!-- ‡∏ù‡∏±‡πà‡∏á‡∏Ç‡∏ß‡∏≤: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô -->
			  <div class="result-ticket">
				<div class="ticket-header">
				  <img src="/image/Logo_d1.png" class="ticket-logo" alt="logo" />
				</div>
				<div class="ticket-info">
				  <div>
					<span class="info-label"><%= lang === 'th' ? '‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô:' : 'ID Card Number:' %></span>
					<span id="result-nid"></span>
				  </div>
				  <div>
					<span class="info-label"><%= lang === 'th' ? '‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:' : 'FirstName LastName:' %></span>
					<span id="result-fullname"></span>
				  </div>
				  <div>
					<span class="info-label"><%= lang === 'th' ? '‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤:' : 'Customer Group:' %></span>
					<span id="result-bank"></span>
				  </div>
				  <div class="ticket-register-count">
					<span id="result-register-count"></span>
				  </div>
				</div>
			  </div>
			</div>
		  </div>
		  
		  

		

		<!-- <div class="content-area">
			<div class="camera">
			  <video id="video">Video stream not available.</video>
			  <button id="start-button">Take photo</button>
			</div>
			<canvas id="canvas" style="display:none;"> </canvas>
			<div class="output">
			  <img id="photo" alt="The screen capture will appear in this box." />
			</div>
		  </div>
		  
		  

		<p>Other Pages:</p>
		<a href="/pageTwo">Page Two</a>
		<br />
		<a href="/pageThree">Page Three</a>
		<br />
		<a href="/pageFour">Page Four</a> -->
		<script type="module" src="/javascript/camera.js"></script>
		<script>
			
			function goToPage(pageId) {
  			  	// document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  			  	// document.getElementById(pageId).classList.add('active');
				const pages = document.querySelectorAll('.page');
  				const newPage = document.getElementById(pageId);

  				pages.forEach(p => {
  				  if (p.id !== pageId) {
  				    p.classList.remove('fade-in');
  				    p.classList.remove('active');
  				    p.style.opacity = 0;
  				    p.style.display = 'none';
  				  }
  				});
			
  				// ‚úÖ ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà
  				const displayMode = pageId === 'page-loading' ? 'flex' : 'block';
  				newPage.style.display = displayMode;
  				newPage.style.opacity = 0;
			
  				setTimeout(() => {
  				  newPage.classList.add('active');
  				  newPage.classList.add('fade-in');
  				  newPage.style.opacity = 1;
  				}, 10);
				// ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á
				const body = document.body;
      			if (pageId === 'page-register') {
      			  body.classList.remove('bg-default');
      			  body.classList.add('bg-register');
      			} else {
      			  body.classList.remove('bg-register');
      			  body.classList.add('bg-default');
      			}
				if (pageId === 'page-camera') {
					resetCameraPage();
				}
				if (pageId === 'page-confirm') {
					onShowPageConfirm();
				}
				if (pageId === 'page-result'){
					showResultPage();
					printRegisterSlip()
					goToPageRegister();
				} 
  
  			}
			

			let i = 0;
			function startDotAnimation() {
			  const dots = document.querySelectorAll('#page-loading .dots span');
			  setInterval(() => {
			    dots.forEach(d => d.classList.remove('active'));
			    dots[i].classList.add('active');
			    i = (i + 1) % dots.length;
			  }, 300);
			}

			function capturePhoto() {
			  const countdownEl = document.getElementById('countdown');
			  let countdown = 3;

			  countdownEl.textContent = countdown;
			  countdownEl.style.display = 'block';

			  const interval = setInterval(() => {
			    countdown--;
			    if (countdown === 0) {
			      clearInterval(interval);
			      countdownEl.style.display = 'none';
				
			      const canvas = document.createElement('canvas');
			      const video = document.getElementById('video');
			      canvas.width = video.videoWidth;
			      canvas.height = video.videoHeight;
			      canvas.getContext('2d').drawImage(video, 0, 0, canvas.width, canvas.height);
				
			      const dataUrl = canvas.toDataURL('image/png');
			      window.capturedPhoto = dataUrl;
				
			      document.getElementById('camera-live').style.display = 'none';
			      document.getElementById('camera-preview').style.display = 'flex';
			      document.getElementById('photo-preview').src = dataUrl;
				
			      document.getElementById('btn-capture').style.display = 'none';
			      document.getElementById('btn-retake').style.display = 'inline-block';
			      document.getElementById('btn-next').style.display = 'inline-block';
			    } else {
			      countdownEl.textContent = countdown;
			    }
			  }, 1000);
			}

			function retakePhoto() {
			  document.getElementById('camera-live').style.display = 'flex';
			  document.getElementById('camera-preview').style.display = 'none';
			  document.getElementById('btn-capture').style.display = 'inline-block';
			  document.getElementById('btn-retake').style.display = 'none';
			  document.getElementById('btn-next').style.display = 'none';
			  window.capturedPhoto = null;
			}
			function onShowPageConfirm() {
			  const data = window.cardData || {};
			  document.getElementById('final-photo').src = window.capturedPhoto || '';
			  document.getElementById('confirm-nid').textContent = maskNid(data.nid || '');
			  document.getElementById('confirm-fullname').textContent = `${data.f_name || ''} ${data.l_name || ''}`;
			  document.getElementById('confirm-bank').textContent = data.bank || '';
			  document.getElementById('confirm-register-count').textContent = data.register_count || '';
			}
			function showResultPage() {
				//‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
				//window.cardData.f_name = '‡∏Å‡∏°‡∏•‡∏ó‡∏£‡∏£‡∏®‡∏ô‡πå';
				//window.cardData.l_name = '‡πÄ‡∏£‡∏∑‡∏≠‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏™‡∏ñ‡∏≤‡∏û‡∏£';
				//window.cardData.nid= '1100XXXXXX462';
				//window.cardData.bank = 'DATAONE';
				//window.cardData.register_count = '11';
			  // ‡∏™‡∏°‡∏°‡∏ï‡∏¥ window.cardData ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å register ‡πÅ‡∏•‡πâ‡∏ß
			  	document.getElementById('result-nid').textContent = maskNid(window.cardData.nid);
			  	document.getElementById('result-fullname').textContent = `${window.cardData.f_name} ${window.cardData.l_name}`;
			  	document.getElementById('result-bank').textContent = window.cardData.bank;
			  	document.getElementById('result-register-count').textContent = window.cardData.register_count;
				  

			}
			function maskNid(nid) {
			  if (!nid || nid.length < 4) return nid;
			  // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: 1100123456789 ‚Üí 1100XXXXXXX789
			  return nid.slice(0,4) + 'XXXXXXX' + nid.slice(-3);
			}

			function goToPageRegister() {
			   setTimeout(() => {
			     goToPage('page-register');
			   }, 5000);
			}
			function goToPageCancelThenRegister() {
				goToPage('page-cancel');
			   setTimeout(() => {
			     goToPage('page-register');
			   }, 3000);
			}

			function resetCameraPage() {
			  // reset ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ global
			  window.capturedPhoto = null;

			  // ‡πÅ‡∏™‡∏î‡∏á live video
			  document.getElementById('camera-live').style.display = 'flex';

			  // ‡∏ã‡πà‡∏≠‡∏ô preview
			  document.getElementById('camera-preview').style.display = 'none';

			  // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏£‡∏π‡∏õ preview
			  document.getElementById('photo-preview').src = '';

			  // ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
			  document.getElementById('btn-capture').style.display = 'inline-block';
			  document.getElementById('btn-retake').style.display = 'none';
			  document.getElementById('btn-next').style.display = 'none';
			}

			function printRegisterSlip() {

			  const payload = {
			    type: 4,
			    comPort: "",
			    baudRate: 0,
			    handshake: 0,
			    lptPort: "",
			    ipAddress: "",
			    portNumber: 0,
			    driverName: "",
			    usbId: 912,
			    usbPrinterName: "",
			    widthDPI: 203,
			    heightDPI: 203,
			    printerType: "KIOSK",
			    thaiLines: [
			      maskNid(window.cardData.nid),                             // ‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô (Masked)
			      `${window.cardData.f_name} ${window.cardData.l_name}`,     // ‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•
			      window.cardData.bank                                      // ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤
			    ],
			    registerCount: "" + window.cardData.register_count || ""
			  };
			
			  fetch("https://localhost:7213/Printer/connect", {
			    method: "POST",
			    headers: { "Content-Type": "application/json" },
			    body: JSON.stringify(payload)
			  });
			  console.log(payload);
			}




			 //document.getElementById("print-btn").addEventListener("click", async () => {
			 //  const payload = {
			 //	type: 4,
			 //	comPort: "",
			 //	baudRate: 0,
			 //	handshake: 0,
			 //	lptPort: "",
			 //	ipAddress: "",
			 //	portNumber: 0,
			 //	driverName: "",
			 //	usbId: 912,
			 //	usbPrinterName: "",
			 //	widthDPI: 203,
			 //	heightDPI: 203,
			 //	printerType: "KIOSK",
			 //	thaiLines: [
			 //	  "110xxxxxxx462",
			 //	  "‡∏Å‡∏°‡∏•‡∏ó‡∏£‡∏£‡∏®‡∏ô‡πå ‡πÄ‡∏£‡∏∑‡∏≠‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏™‡∏ñ‡∏≤‡∏û‡∏£",
			 //	  "DATAONE ASIA",
			 //	],
			//	registerCount: 4
			 //  };
	//
			 //  try {
			 //	const response = await fetch("https://localhost:7213/Printer/connect", {
			 //		  method: "POST",
			 //		  headers: { "Content-Type": "application/json" },
			 //		  body: JSON.stringify(payload)
			 //		});
			//
			 //		const result = await response.json();
			//
			 //		if (result.success) {
			 //		  document.getElementById("print-result").textContent = "‚úÖ " + result.message;
			 //		} else {
			 //		  document.getElementById("print-result").textContent = "‚ùå " + result.message;
			 //		}
			 //  } catch (error) {
			 //	document.getElementById("print-result").textContent = "‚ùå Error: " + error.message;
			 //  }
			 //});
		  </script>
		  
	</body>

	</html>